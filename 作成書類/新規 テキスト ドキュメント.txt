皆さん、おはようございます。今日は「ボタン単位までの権限管理実装手法」についてお話しします。なるべく分かりやすく説明しますので、どうぞよろしくお願いします。まず、なぜ細かい権限管理が必要なのかというと、日常の業務で案件管理システムとかを使うときに、画面でボタンがあっても「これをクリックしていいのかな？」と迷った経験はありませんか？もし誤操作したら、トラブルになっちゃうと大変ですよね。このプロジェクトはまさにその問題を解決するために作られました。ポイントはシンプルで、あなたが見えるボタンは押せるボタンだけ、押せないボタンは最初から見せない、ということです。もう一つの例をあげる、削除や編集はデータが変わってしまう危険な操作ですね。ですから、最初から管理者以外の一般社員には削除や編集ボタンを見せないようにするのが、一番安全ではないかなと思います。
本システムは3つの観点から理解していきましょう。

まずは、データベース設計。ここでは、「誰が」「どの役割で」「何ができるか」という情報を階層的にデータベースの中で整理しています。次のポイントはバックエンド制御（システム側のチェック）です。ここでは Spring Security を使い、ユーザーがログインした後に、どんな権限を持っているかを認証・認可の仕組みで厳しく確認します。つまり、システムの裏側で「この人はこの操作をしてもいいのか」を判断しています。最後のポイントはフロントエンド制御（画面側のチェック）です。ここでは、あなたがもっている権限に応じてボタンをみせる・見せないを切り替えたり、権限のない画面には移ることできないように制御しています。これによって、ボタン単位までの権限管理を実現するが可能です。

では、具体的に見ていきましょう

まずデータベース設計ですが、ユーザー表、役割表、権限表の3つのテーブルで構成されており、ユーザーがログインすると、まずはデータベースにアクセスして、入力されたユーザーIDとパスワードが正しいかどうかを確認します。もし正しければ、そのユーザーに紐づいている役割（ロール）情報を取得。そしてさらに、その役割に関連するメニューやボタンの権限情報を取得します。この流れによって、ログインしたユーザーがどのボタンを押せるのか、どの機能を使えるのかを正確に判断できるようになっています。

次にバックエンドの権限チェックですが、ここでは詳しく話すとなると、Spring Securityの説明が必要になってしまうので、ここでは概要だけお話しします。Spring Securityを使い、ユーザーがログインした後にどの権限を持っているか確認し、バックエンドAPIをアクセスする時にもチェックすることで不正操作を防ぐことができます。

そしてフロントエンドの工夫ですが、もともとすべてのボタンがあります。開発段階では、すべてのボタンをコード上に書いておきます。そして、ユーザーがログインしたときに取得した権限情報に基づいて、Vue.js 側で自動的に「押せるボタン」と「押せないボタン」を判定し、押せないボタンはその場で削除されます。処理のイメージとしては、if と else の分岐のようなものです。

分かりやすくするために、ここで直接例を挙げて説明します。スーパー管理者は全ての操作が可能でシステム全体を管理でき、人事管理者は人事関連だけ操作可能で、権限のない操作は見えず、使えない機能は最初から表示されないので操作ミスや混乱を防止できます。

システム全体像で見ると、まずログイン認証で本人確認を行い、次に5つのテーブルを連結して権限情報を取得し、画面生成時に権限に応じたボタンとメニューだけを表示します。そして操作時にはフロントエンドとバックエンドの両方で二重チェックを行い、万が一の不正アクセスも防ぎます。
この仕組みにより、画面に表示されないだけでなくシステム内部でも厳格にチェックされ、安全で便利な画面を提供できます。
以上のように、データベース設計、バックエンドチェック、フロントエンド制御の3つのポイントを押さえることで、誤操作を防ぎ、業務効率を向上させることができます。

ご清聴ありがとうございました。